# project.def
# Apptainer definition file to build a portable container for the miniWeather mini-app.
# Optional but useful when module availability differs across clusters.

Bootstrap: docker
From: ubuntu:22.04

%post
    apt-get update && \
    DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \
        build-essential openmpi-bin libopenmpi-dev python3 python3-pip python3-matplotlib && \
    rm -rf /var/lib/apt/lists/*

%environment
    export OMP_NUM_THREADS=${OMP_NUM_THREADS:-4}

%runscript
    # Default runscript just drops into bash; usage: apptainer exec project.sif <cmd>
    exec /bin/bash "$@"
